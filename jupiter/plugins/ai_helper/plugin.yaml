# AI Helper Plugin Manifest v2
# Migrated from legacy ai_helper.py
# Version: 1.1.1 - Fixed manifest schema compliance

id: ai_helper
name: AI Helper
version: 1.3.0
description: AI-assisted code analysis with Ollama, OpenAI, Anthropic support for refactoring, documentation, and optimization suggestions.
type: tool
jupiter_version: ">=1.8.0"

# Optional metadata
author:
  name: Jupiter Team
  url: https://github.com/sn8k/Jupiter-project
license: MIT
homepage: https://github.com/sn8k/Jupiter-project
trust_level: community

# Permissions (array format per schema)
permissions:
  - fs_read
  - emit_events
  - register_api
  - register_cli
  - register_ui

# Capabilities
capabilities:
  metrics:
    enabled: true
    export_format: json
  jobs:
    enabled: true
    max_concurrent: 1
    timeout: 120
  health_check:
    enabled: true
    interval: 60

# Entrypoints
entrypoints:
  init: "__init__:init"
  shutdown: "__init__:shutdown"
  health: "__init__:health"
  metrics: "__init__:metrics"

# CLI contributions
cli:
  commands:
    - name: suggest
      description: Generate AI suggestions for the project
      entrypoint: "cli.commands:cmd_suggest"
    - name: analyze-file
      description: Analyze a specific file with AI
      entrypoint: "cli.commands:cmd_analyze_file"
    - name: ai-status
      description: Show AI Helper status
      entrypoint: "cli.commands:cmd_status"
    - name: ai-health
      description: Check AI Helper health
      entrypoint: "cli.commands:cmd_health"

# API contributions
api:
  router: "server.api:router"
  prefix: /ai_helper
  tags:
    - ai_helper
    - analysis

# UI contributions
ui:
  panels:
    - id: main
      location: sidebar
      route: /plugins/ai_helper
      title_key: plugin.ai_helper.title
      icon: "ðŸ¤–"
      order: 50
  assets:
    js:
      - web/panels/main.js
  i18n:
    path: web/lang
    languages:
      - en
      - fr

# Configuration
config:
  schema:
    type: object
    properties:
      enabled:
        type: boolean
        default: true
      provider:
        type: string
        enum:
          - mock
          - openai
          - anthropic
          - local
        default: mock
      api_key:
        type: string
        format: password
      suggestion_types:
        type: array
        items:
          type: string
        default:
          - refactoring
          - doc
          - testing
      severity_threshold:
        type: string
        enum:
          - info
          - low
          - medium
          - high
          - critical
        default: info
      large_file_threshold_kb:
        type: integer
        minimum: 10
        maximum: 500
        default: 50
      max_functions_threshold:
        type: integer
        minimum: 5
        maximum: 100
        default: 20
  defaults:
    enabled: true
    provider: mock
    suggestion_types:
      - refactoring
      - doc
      - testing
    severity_threshold: info
    large_file_threshold_kb: 50
    max_functions_threshold: 20
