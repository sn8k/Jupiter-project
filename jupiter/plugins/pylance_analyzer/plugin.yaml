# Pylance Analyzer Plugin Manifest v2
# Migrated from legacy pylance_analyzer.py
# Version: 1.0.0 - Initial v2 migration

id: pylance_analyzer
name: Pylance Analyzer
version: 1.0.1
description: Static type analysis using Pyright (Pylance engine). Detects type errors, unused imports, and other issues.
type: tool
jupiter_version: ">=1.8.0"

# Metadata
author:
  name: Jupiter Team
  url: https://github.com/sn8k/Jupiter-project
license: MIT
homepage: https://github.com/sn8k/Jupiter-project
trust_level: official

# Permissions
permissions:
  - fs_read
  - emit_events
  - register_api
  - register_ui
  - run_commands

# Capabilities
capabilities:
  metrics:
    enabled: true
    export_format: json
  health_check:
    enabled: true
    interval: 60
  jobs:
    enabled: false  # Analysis is synchronous during scan

# Entrypoints
entrypoints:
  init: "__init__:init"
  shutdown: "__init__:shutdown"
  health: "__init__:health"
  metrics: "__init__:metrics"

# API contributions
api:
  router: "server.api:router"
  prefix: /pylance_analyzer
  tags:
    - pylance
    - type-checking
    - analysis

# UI contributions
ui:
  panels:
    - id: main
      location: sidebar
      route: /plugins/pylance_analyzer
      title_key: plugin.pylance_analyzer.title
      icon: "ðŸ”"
      order: 75
  assets:
    js:
      - web/panels/main.js
  i18n:
    path: web/lang
    languages:
      - en
      - fr

# Configuration schema
config:
  defaults:
    enabled: true
    strict: false
    include_warnings: true
    include_info: false
    max_files: 500
    timeout: 120
    extra_args: []
  schema:
    type: object
    properties:
      enabled:
        type: boolean
        default: true
        title: Enable Analysis
        description: Run Pyright analysis during scans
      strict:
        type: boolean
        default: false
        title: Strict Mode
        description: Use strict type checking mode
      include_warnings:
        type: boolean
        default: true
        title: Include Warnings
        description: Include warning-level diagnostics
      include_info:
        type: boolean
        default: false
        title: Include Info
        description: Include informational diagnostics
      max_files:
        type: integer
        default: 500
        minimum: 1
        maximum: 10000
        title: Max Files
        description: Maximum number of files to analyze
      timeout:
        type: integer
        default: 120
        minimum: 10
        maximum: 600
        title: Timeout (seconds)
        description: Analysis timeout in seconds
      extra_args:
        type: array
        items:
          type: string
        default: []
        title: Extra Arguments
        description: Additional pyright command-line arguments

# Dependencies
dependencies: {}
python_dependencies:
  - pyright>=1.1.0
