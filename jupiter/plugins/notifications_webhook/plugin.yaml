# Notifications Webhook Plugin Manifest v2
# Version: 1.0.0 - Fixed manifest schema compliance

id: notifications_webhook
name: Notifications Webhook
version: "1.0.1"
description: Sends notifications to webhook URL or local events. Supports scan_complete, analysis_complete, api_connected, and quality_alert events.
type: tool
jupiter_version: ">=1.8.0"

# Metadata
author:
  name: Jupiter Team
  url: https://github.com/sn8k/Jupiter-project
license: MIT
homepage: https://github.com/sn8k/Jupiter-project
trust_level: official

# Permissions
permissions:
  - fs_read
  - emit_events
  - network_outbound
  - register_ui

# Dependencies
python_dependencies:
  - httpx>=0.24.0

# Capabilities
capabilities:
  metrics:
    enabled: true
    export_format: json
  health_check:
    enabled: true
    interval: 60
  jobs:
    enabled: false

# Entrypoints
entrypoints:
  init: "__init__:init"
  shutdown: "__init__:shutdown"
  health: "__init__:health"
  metrics: "__init__:metrics"

# UI contributions
ui:
  panels:
    - id: settings
      location: settings
      route: /plugins/notifications_webhook
      title_key: plugin.notifications_webhook.title
      icon: "ðŸ””"
      order: 50
      settings_section: Notifications
  assets:
    js:
      - web/panels/settings.js
  i18n:
    path: web/lang
    languages:
      - en
      - fr

# Configuration schema
config:
  defaults:
    enabled: true
    url: null
    events:
      - scan_complete
      - api_connected
    timeout: 5.0
    retry_count: 0
    retry_delay: 1.0
