<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Version: 1.3.0 - Cache-control hardening for the Web UI -->
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title data-i18n="app_title">Jupiter ‚Äì Interface</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>
  <body>
    <div class="app-shell">
      <header class="app-header">
        <div class="brand">
          <span class="logo" aria-hidden="true">ü™ê</span>
          <div>
            <p class="eyebrow">Jupiter <span id="global-version-badge" class="version-pill">v‚Äî</span></p>
            <h1 data-i18n="main_title">Cartographie &amp; Observabilit√©</h1>
            <p class="muted" data-i18n="main_subtitle">Interface sombre, minimaliste et extensible</p>
          </div>
        </div>
        <div class="header-actions">
          <div class="context">
            <p class="label" data-i18n="current_project">Projet actuel</p>
            <div style="display: flex; align-items: center; gap: 0.5rem;">
              <p class="value" id="root-path" data-i18n="loading" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 300px;">Chargement‚Ä¶</p>
              <button class="ghost small" data-action="browse-root" title="Parcourir" style="padding: 4px 8px;">üìÇ</button>
            </div>
          </div>
          <div class="actions">
            <button class="ghost" id="user-profile-btn" onclick="openLoginModal()" title="Non connect√©">üë§</button>
            <button class="primary" data-action="open-scan-modal" data-i18n="scan_button">Scan</button>
            <button class="primary" data-action="open-run-modal" data-i18n="run_button">Run</button>
            <button class="primary" data-action="start-watch" data-i18n="watch_button">Watch</button>
          </div>
        </div>
      </header>

      <div class="app-body">
        <nav class="app-nav" aria-label="Navigation principale">
          <button class="nav-btn active" data-view="dashboard" data-i18n="dashboard_view">üìä Dashboard</button>
          <button class="nav-btn" data-view="analysis" data-i18n="analysis_view">üîç Analyse</button>
          <button class="nav-btn" data-view="ci" data-i18n="ci_view">üö¶ CI</button>
          <button class="nav-btn" data-view="diagnostics" data-i18n="diagnostic_view">ü©∫ Diagnostic</button>
          <button class="nav-btn" data-view="files" data-i18n="files_view">üìÅ Fichiers</button>
          <button class="nav-btn" data-view="functions" data-i18n="functions_view">‚öôÔ∏è Fonctions</button>
          <button class="nav-btn" data-view="api" data-i18n="api_view">üîå API</button>
          <button class="nav-btn" data-view="history" data-i18n="history_view">üìú Historique</button>
          <button class="nav-btn" data-view="projects" data-i18n="projects_view">üìÇ Projets</button>
          <!-- Dynamic plugin menu items will be inserted before this marker -->
          <span id="plugin-menu-marker" style="display:none;"></span>
          <button class="nav-btn" data-view="settings" data-i18n="settings_view">‚öôÔ∏è Param√®tres</button>
          <button class="nav-btn" data-view="plugins" data-i18n="plugins_view">üß© Plugins</button>
          <button class="nav-btn" data-view="suggestions" data-i18n="suggestions_view">ü§ñ Suggestions IA</button>
        </nav>

        <main class="content">
          <section class="view" data-view="dashboard" aria-label="Vue tableau de bord">
            <div class="grid two-cols">
              <section class="panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="d_pano_eyebrow">Panorama</p>
                    <h2 data-i18n="d_pano_title">√âtat rapide du projet</h2>
                    <p class="muted" data-i18n="d_pano_subtitle">Statut, progression et licence Meeting.</p>
                  </div>
                  <div class="badges" id="status-badges"></div>
                </header>
                <div class="stats-grid" id="stats-grid"></div>
              </section>

              <section class="panel" id="watch-panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="watch_eyebrow">Temps r√©el</p>
                    <h2 data-i18n="watch_title">Surveillance en direct</h2>
                    <p class="muted" data-i18n="watch_subtitle">Suivi des scans, analyses et √©v√©nements en temps r√©el.</p>
                  </div>
                  <div class="badges">
                    <span class="badge" id="watch-status-badge">Stopped</span>
                  </div>
                </header>

                <!-- Quick Actions -->
                <div class="watch-actions" style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                  <button class="primary small" data-action="open-scan-modal" data-i18n="scan_button">üîç Scan</button>
                  <button class="secondary small" data-action="start-watch" id="watch-toggle-btn">üëÅÔ∏è Watch</button>
                </div>

                <!-- Progress Bar (shown during scan) -->
                <div id="watch-progress" class="watch-progress hidden" style="margin-bottom: 1rem;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                    <span class="small" id="watch-progress-label" data-i18n="scan_in_progress">Scan en cours...</span>
                    <span class="small" id="watch-progress-percent">0%</span>
                  </div>
                  <div class="progress-bar-container" style="height: 8px; background: var(--bg-subtle); border-radius: 4px; overflow: hidden;">
                    <div id="watch-progress-bar" class="progress-bar" style="width: 0%; height: 100%; background: var(--accent); transition: width 0.3s ease;"></div>
                  </div>
                  <p class="small muted" id="watch-progress-detail" style="margin-top: 0.25rem;"></p>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid watch-stats" style="grid-template-columns: repeat(4, 1fr); gap: 0.75rem; margin-bottom: 1rem;">
                  <div class="stat-card mini">
                    <p class="label" data-i18n="watch_files_scanned">Fichiers</p>
                    <p class="value" id="watch-files-count">0</p>
                  </div>
                  <div class="stat-card mini">
                    <p class="label" data-i18n="watch_functions_found">Fonctions</p>
                    <p class="value" id="watch-functions-count">0</p>
                  </div>
                  <div class="stat-card mini">
                    <p class="label" data-i18n="watch_total_events">√âv√©nements</p>
                    <p class="value" id="watch-events-count">0</p>
                  </div>
                  <div class="stat-card mini">
                    <p class="label" data-i18n="watch_call_count">Appels</p>
                    <p class="value" id="watch-total-calls">0</p>
                  </div>
                </div>

                <!-- Watch Status -->
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                  <span class="label">Status:</span>
                  <span id="watch-status" class="value text-muted" data-i18n="watch_inactive">Inactif</span>
                </div>

                <!-- Events List -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                  <p class="label" data-i18n="watch_events_title">√âv√©nements r√©cents</p>
                  <button class="ghost small" id="watch-clear-events" title="Clear">üóëÔ∏è</button>
                </div>
                <ul id="watch-events" class="event-list" style="max-height: 150px; overflow-y: auto; list-style: none; padding: 0; margin: 0;"></ul>
                
                <p class="small muted" style="margin-top: 0.75rem;" data-i18n="watch_tip">
                  Lancez un Scan ou utilisez Run avec l'analyse dynamique pour voir les √©v√©nements en temps r√©el.
                </p>
              </section>

              <section class="panel" id="upload-panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="d_upload_eyebrow">Point d'entr√©e</p>
                    <h2 data-i18n="d_upload_title">Charger un rapport</h2>
                    <p class="muted" data-i18n="d_upload_subtitle">D√©posez un fichier <code>.json</code> g√©n√©r√© par <code>jupiter scan</code> ou utilisez l'exemple.</p>
                  </div>
                </header>
                <div class="uploader" id="dropzone">
                  <div>
                    <p class="muted" data-i18n="d_upload_prompt">Glissez un rapport ou cliquez pour parcourir.</p>
                    <p class="small" data-i18n="d_upload_compat">Compatible avec les scans statiques et les futures analyses incr√©mentales.</p>
                  </div>
                  <input type="file" id="report-input" accept="application/json" />
                </div>
                <div class="upload-meta" id="upload-meta"></div>
              </section>
            </div>
          </section>

          <section class="view hidden" data-view="analysis" aria-label="Vue analyse">
            <div class="grid two-cols">
              <section class="panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="a_overview_eyebrow">Analyse</p>
                    <h2 data-i18n="a_overview_title">Synth√®se d√©taill√©e</h2>
                    <p class="muted" data-i18n="a_overview_subtitle">Extensions dominantes, tailles moyennes et fichiers r√©cents.</p>
                  </div>
                </header>
                <div class="stats-grid" id="analysis-stats"></div>
              </section>

              <section class="panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="alerts_eyebrow">Alertes</p>
                    <h2 data-i18n="alerts_title">Points d'attention</h2>
                    <p class="muted" data-i18n="alerts_subtitle">√âtat des plugins, licence Meeting et fonctions inactives.</p>
                  </div>
                </header>
                <ul class="alert-list" id="alert-list"></ul>
              </section>
            </div>

            <section class="panel">
              <header>
                <div>
                  <p class="eyebrow" data-i18n="hotspots_eyebrow">Hotspots</p>
                  <h2 data-i18n="hotspots_title">Fichiers √† explorer</h2>
                  <p class="muted" data-i18n="hotspots_subtitle">Classement des fichiers avec le plus de fonctions.</p>
                </div>
              </header>
              <div class="table-wrapper">
                <table aria-label="Hotspots">
                  <thead>
                    <tr>
                      <th data-i18n="hotspots_file">Fichier</th>
                      <th data-i18n="hotspots_detail">D√©tails</th>
                      <th class="numeric" data-i18n="hotspots_rank">Rang</th>
                    </tr>
                  </thead>
                  <tbody id="hotspot-body"></tbody>
                </table>
                <p class="empty" id="hotspot-empty"></p>
              </div>
            </section>
          </section>

          <!-- CI / Quality Gates View -->
          <section class="view hidden" data-view="ci" aria-label="Vue CI">
            <div class="grid two-cols">
              <section class="panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="ci_eyebrow">Quality Gates</p>
                    <h2 data-i18n="ci_title">CI / Quality Check</h2>
                    <p class="muted" data-i18n="ci_subtitle">Validate code quality against configured thresholds.</p>
                  </div>
                  <div class="badges">
                    <span class="badge" id="ci-status-badge" data-i18n="ci_not_run">Not run</span>
                  </div>
                </header>

                <!-- CI Status Card -->
                <div id="ci-result-card" class="ci-result-card" style="margin-bottom: 1rem; padding: 1rem; border-radius: 8px; background: var(--bg-subtle);">
                  <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                    <span id="ci-status-icon" style="font-size: 2rem;">‚è≥</span>
                    <div>
                      <p class="label" data-i18n="ci_status">Status</p>
                      <p class="value" id="ci-status-text" style="font-size: 1.25rem; font-weight: bold;">‚Äî</p>
                    </div>
                  </div>
                  <div id="ci-failures" class="ci-failures" style="display: none;">
                    <p class="label" style="color: var(--error);" data-i18n="ci_failures">Failures:</p>
                    <ul id="ci-failures-list" style="margin: 0.5rem 0; padding-left: 1.5rem; color: var(--error);"></ul>
                  </div>
                </div>

                <!-- Metrics -->
                <div class="stats-grid" style="grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                  <div class="stat-card mini">
                    <p class="label" data-i18n="ci_complexity">Max Complexity</p>
                    <p class="value" id="ci-metric-complexity">‚Äî</p>
                    <p class="small muted" id="ci-threshold-complexity"></p>
                  </div>
                  <div class="stat-card mini">
                    <p class="label" data-i18n="ci_duplication">Duplication Clusters</p>
                    <p class="value" id="ci-metric-duplication">‚Äî</p>
                    <p class="small muted" id="ci-threshold-duplication"></p>
                  </div>
                  <div class="stat-card mini">
                    <p class="label" data-i18n="ci_unused">Unused Functions</p>
                    <p class="value" id="ci-metric-unused">‚Äî</p>
                    <p class="small muted" id="ci-threshold-unused"></p>
                  </div>
                </div>

                <!-- Run CI Button -->
                <div style="margin-top: 1.5rem;">
                  <button class="primary" id="ci-run-btn" data-action="run-ci" data-i18n="ci_run">üöÄ Run CI Check</button>
                  <button class="secondary" id="ci-export-btn" data-action="export-ci" data-i18n="ci_export" style="margin-left: 0.5rem;">üì• Export JSON</button>
                </div>
              </section>

              <section class="panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="ci_config_eyebrow">Configuration</p>
                    <h2 data-i18n="ci_config_title">Quality Thresholds</h2>
                    <p class="muted" data-i18n="ci_config_subtitle">Override thresholds for this check (leave empty for config defaults).</p>
                  </div>
                </header>

                <div class="form-group" style="margin-bottom: 1rem;">
                  <label for="ci-threshold-complexity-input" data-i18n="ci_max_complexity">Max Complexity</label>
                  <input type="number" id="ci-threshold-complexity-input" min="1" placeholder="e.g. 15" style="width: 100%;" />
                </div>
                <div class="form-group" style="margin-bottom: 1rem;">
                  <label for="ci-threshold-duplication-input" data-i18n="ci_max_duplication">Max Duplication Clusters</label>
                  <input type="number" id="ci-threshold-duplication-input" min="0" placeholder="e.g. 5" style="width: 100%;" />
                </div>
                <div class="form-group" style="margin-bottom: 1rem;">
                  <label for="ci-threshold-unused-input" data-i18n="ci_max_unused">Max Unused Functions</label>
                  <input type="number" id="ci-threshold-unused-input" min="0" placeholder="e.g. 10" style="width: 100%;" />
                </div>

                <p class="small muted" data-i18n="ci_config_note">
                  Defaults are read from your project's <code>ci.fail_on</code> config section.
                </p>
              </section>
            </div>

            <!-- CI History -->
            <section class="panel" style="margin-top: 1.5rem;">
              <header>
                <div>
                  <p class="eyebrow" data-i18n="ci_history_eyebrow">History</p>
                  <h3 data-i18n="ci_history_title">Recent CI Runs</h3>
                  <p class="muted" data-i18n="ci_history_subtitle">Track your quality gate results over time.</p>
                </div>
                <button class="ghost small" id="ci-clear-history" title="Clear history">üóëÔ∏è</button>
              </header>
              <div class="table-wrapper">
                <table aria-label="CI History">
                  <thead>
                    <tr>
                      <th data-i18n="ci_history_date">Date</th>
                      <th data-i18n="ci_history_status">Status</th>
                      <th data-i18n="ci_complexity">Complexity</th>
                      <th data-i18n="ci_duplication">Duplication</th>
                      <th data-i18n="ci_unused">Unused</th>
                    </tr>
                  </thead>
                  <tbody id="ci-history-body"></tbody>
                </table>
                <p class="empty" id="ci-history-empty" data-i18n="ci_history_empty">No CI runs yet.</p>
              </div>
            </section>
          </section>

          <section class="view hidden" data-view="diagnostics" aria-label="Vue diagnostic">
            <div class="grid two-cols">
              <section class="panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="diag_eyebrow">Diagnostic</p>
                    <h2 data-i18n="diag_title">Connectivit√© & contexte</h2>
                    <p class="muted" data-i18n="diag_subtitle">√âtat du serveur API et racine servie.</p>
                  </div>
                </header>
                <div class="stats-grid">
                  <div class="stat-card">
                    <p class="label" data-i18n="served_root">Racine servie</p>
                    <p class="value" id="diag-root" data-i18n="loading">Chargement‚Ä¶</p>
                  </div>
                  <div class="stat-card">
                    <p class="label" data-i18n="diag_api_label">API cible</p>
                    <p class="value" id="api-base-url">http://127.0.0.1:8000</p>
                  </div>
                  <div class="stat-card">
                    <p class="label" data-i18n="diag_scan_label">Scan</p>
                    <p class="value" id="diag-scan-state" data-i18n="diag_scan_missing">En attente</p>
                  </div>
                </div>
              </section>

              <section class="panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="live_events_eyebrow">Temps r√©el</p>
                    <h2 data-i18n="live_events_title">√âv√©nements</h2>
                    <p class="muted" data-i18n="live_events_subtitle">Derni√®res actions UI et futures notifications WS.</p>
                  </div>
                </header>
                <div class="live-stream" id="live-stream"></div>
              </section>
            </div>

            <section class="panel">
              <header>
                <div>
                  <p class="eyebrow" data-i18n="logs_eyebrow">Logs</p>
                  <h2 data-i18n="logs_title">Historique rapide</h2>
                  <p class="muted" data-i18n="logs_subtitle">Suivi des actions utilisateur et chargements.</p>
                </div>
                <div class="actions">
                    <select id="log-level-filter" class="small" style="padding: 2px 6px; font-size: 12px;">
                        <option value="ALL">All</option>
                        <option value="INFO">Info</option>
                        <option value="WARN">Warn</option>
                        <option value="ERROR">Error</option>
                    </select>
                </div>
              </header>
              <div class="log-stream" id="log-stream"></div>
            </section>
          </section>

          <section class="view hidden" data-view="files" aria-label="Vue fichiers">
            <div class="files-layout">
              <!-- Main Content (Left) -->
              <div class="files-main">
                <section class="panel">
                  <header class="files-header">
                    <div>
                      <p class="eyebrow" data-i18n="files_eyebrow">Files</p>
                      <h2 data-i18n="files_title">Scanned tree</h2>
                      <p class="muted" data-i18n="files_subtitle">Sorted by size (top 200).</p>
                    </div>
                    <div class="files-toolbar">
                      <div class="search-box">
                        <input type="text" id="files-search" placeholder="üîç Search..." data-i18n-placeholder="files_search_placeholder" />
                      </div>
                      <div class="files-filters">
                        <select id="files-type-filter">
                          <option value="" data-i18n="files_filter_all">All types</option>
                          <option value="py">.py</option>
                          <option value="js">.js</option>
                          <option value="ts">.ts</option>
                          <option value="html">.html</option>
                          <option value="css">.css</option>
                          <option value="json">.json</option>
                          <option value="md">.md</option>
                        </select>
                      </div>
                      <div class="files-stats" id="files-stats">
                        <span class="badge" id="files-count-badge">0 files</span>
                        <span class="badge" id="files-size-badge">0 KB</span>
                      </div>
                    </div>
                  </header>
                  <div class="table-wrapper">
                    <table aria-label="Files list" class="files-table">
                      <thead>
                        <tr>
                          <th data-i18n="files_path" data-sort="path" class="sortable">Path</th>
                          <th class="numeric" data-i18n="files_type" data-sort="type" class="sortable">Type</th>
                          <th class="numeric" data-i18n="files_size" data-sort="size_bytes" class="sortable">Size</th>
                          <th class="numeric" data-i18n="files_modified" data-sort="modified_timestamp" class="sortable">Modified</th>
                          <th class="numeric" data-i18n="files_funcs" data-sort="func_count" class="sortable">Functions</th>
                          <th class="actions" data-i18n="files_actions">Actions</th>
                        </tr>
                      </thead>
                      <tbody id="files-body"></tbody>
                    </table>
                    <p class="empty" id="files-empty"></p>
                  </div>
                </section>
              </div>

              <!-- Help Panel (Right Side) -->
              <aside class="files-help-panel">
                <div class="card sticky">
                  <h3 data-i18n="files_help_title">üìñ Files Guide</h3>
                  <p class="muted small" data-i18n="files_help_intro">
                    This view displays all files analyzed by Jupiter during the last scan.
                  </p>
                  
                  <div class="help-section">
                    <h4 data-i18n="files_help_columns_title">üìä Table columns</h4>
                    <ul class="muted small">
                      <li data-i18n="files_help_columns_path"><strong>Path</strong>: Relative path in project</li>
                      <li data-i18n="files_help_columns_type"><strong>Type</strong>: File extension</li>
                      <li data-i18n="files_help_columns_size"><strong>Size</strong>: File size in KB</li>
                      <li data-i18n="files_help_columns_modified"><strong>Modified</strong>: Last modification date</li>
                      <li data-i18n="files_help_columns_funcs"><strong>Functions</strong>: Number of functions/methods detected</li>
                    </ul>
                  </div>

                  <div class="help-section">
                    <h4 data-i18n="files_help_actions_title">üéØ Available actions</h4>
                    <ul class="muted small">
                      <li data-i18n="files_help_actions_simulate">üî¨ Simulate: Analyze the impact of removing this file</li>
                    </ul>
                  </div>

                  <div class="help-section">
                    <h4 data-i18n="files_help_simulator_title">üî¨ About the Simulator</h4>
                    <p class="muted small" data-i18n="files_help_simulator_desc">
                      The simulator shows which other files and functions would be affected if this file were removed. Useful for refactoring safely.
                    </p>
                  </div>

                  <div class="help-section">
                    <h4 data-i18n="files_help_tips_title">üí° Tips</h4>
                    <ul class="muted small">
                      <li data-i18n="files_help_tips_search">Use the search to quickly find a file</li>
                      <li data-i18n="files_help_tips_filter">Filter by file type to focus on specific languages</li>
                      <li data-i18n="files_help_tips_sort">Click column headers to sort (coming soon)</li>
                    </ul>
                  </div>
                </div>
              </aside>
            </div>
          </section>

          <section class="view hidden" data-view="functions" aria-label="Vue fonctions">
            <div class="functions-layout">
              <!-- Main Content (Left) -->
              <div class="functions-main">
                <section class="panel">
                  <header class="functions-header">
                    <div>
                      <p class="eyebrow" data-i18n="functions_eyebrow">Functions</p>
                      <h2 data-i18n="functions_title">Function Details</h2>
                      <p class="muted" data-i18n="functions_subtitle">Static and dynamic analysis.</p>
                    </div>
                    <div class="functions-toolbar">
                      <div class="search-box">
                        <input type="text" id="functions-search" placeholder="üîç Search..." data-i18n-placeholder="functions_search_placeholder" />
                      </div>
                      <div class="functions-filters">
                        <select id="functions-status-filter">
                          <option value="" data-i18n="functions_filter_all">All statuses</option>
                          <option value="used" data-i18n="functions_filter_used">Used</option>
                          <option value="unused" data-i18n="functions_filter_unused">Unused</option>
                          <option value="dynamic" data-i18n="functions_filter_dynamic">Called (dynamic)</option>
                        </select>
                      </div>
                      <button class="btn btn-export" id="functions-export-unused-btn" onclick="showUnusedFunctionsExportModal()" title="Export unused functions for AI agent">
                        ü§ñ <span data-i18n="functions_export_ai">Export for AI</span>
                      </button>
                      <div class="functions-stats" id="functions-stats">
                        <span class="badge" id="functions-count-badge">0 functions</span>
                        <span class="badge badge-success" id="functions-used-badge">0 used</span>
                        <span class="badge badge-warning" id="functions-unused-badge">0 unused</span>
                      </div>
                    </div>
                  </header>
                  <div class="table-wrapper">
                    <table aria-label="Functions list" class="functions-table">
                      <thead>
                        <tr>
                          <th data-i18n="func_name" data-sort="name" class="sortable" onclick="handleSort('functions', 'name')">Name</th>
                          <th data-i18n="func_file" data-sort="file" class="sortable" onclick="handleSort('functions', 'file')">File</th>
                          <th class="numeric" data-i18n="func_lines" data-sort="lines" class="sortable" onclick="handleSort('functions', 'lines')">Lines</th>
                          <th class="numeric" data-i18n="func_calls" data-sort="calls" class="sortable" onclick="handleSort('functions', 'calls')">Calls (Dyn)</th>
                          <th data-i18n="func_status" data-sort="status" class="sortable" onclick="handleSort('functions', 'status')">Status</th>
                          <th class="actions" data-i18n="func_actions">Actions</th>
                        </tr>
                      </thead>
                      <tbody id="functions-body"></tbody>
                    </table>
                    <p class="empty" id="functions-empty"></p>
                  </div>
                </section>

                <!-- Dynamic Call Graph -->
                <section class="panel" style="margin-top: 1rem;">
                  <header>
                    <div>
                      <p class="eyebrow" data-i18n="graph_eyebrow">Visualization</p>
                      <h2 data-i18n="graph_title">Dynamic Call Graph</h2>
                      <p class="muted" data-i18n="graph_subtitle">Function interactions during execution.</p>
                    </div>
                  </header>
                  <div class="graph-container" style="position: relative; height: 400px; border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden;">
                    <canvas id="dynamic-graph-canvas"></canvas>
                  </div>
                </section>
              </div>

              <!-- Help Panel (Right Side) -->
              <aside class="functions-help-panel">
                <div class="card sticky">
                  <h3 data-i18n="functions_help_title">üìñ Functions Guide</h3>
                  <p class="muted small" data-i18n="functions_help_intro">
                    This view lists all functions detected in your project with usage analysis.
                  </p>
                  
                  <div class="help-section">
                    <h4 data-i18n="functions_help_columns_title">üìä Table columns</h4>
                    <ul class="muted small">
                      <li data-i18n="functions_help_columns_name"><strong>Name</strong>: Function or method name</li>
                      <li data-i18n="functions_help_columns_file"><strong>File</strong>: Source file path</li>
                      <li data-i18n="functions_help_columns_lines"><strong>Lines</strong>: Number of lines of code</li>
                      <li data-i18n="functions_help_columns_calls"><strong>Calls</strong>: Dynamic call count (from Watch mode)</li>
                      <li data-i18n="functions_help_columns_status"><strong>Status</strong>: Used, Unused, or Called dynamically</li>
                    </ul>
                  </div>

                  <div class="help-section">
                    <h4 data-i18n="functions_help_status_title">üö¶ Status meanings</h4>
                    <ul class="muted small">
                      <li data-i18n="functions_help_status_used"><span class="status-dot used"></span> <strong>Used</strong>: Called in static analysis</li>
                      <li data-i18n="functions_help_status_unused"><span class="status-dot unused"></span> <strong>Unused</strong>: Never called (potential dead code)</li>
                      <li data-i18n="functions_help_status_dynamic"><span class="status-dot dynamic"></span> <strong>Dynamic</strong>: Called at runtime (Watch mode)</li>
                    </ul>
                  </div>

                  <div class="help-section">
                    <h4 data-i18n="functions_help_actions_title">üéØ Available actions</h4>
                    <ul class="muted small">
                      <li data-i18n="functions_help_actions_simulate">üî¨ Simulate: Analyze impact of removing this function</li>
                      <li data-i18n="functions_help_actions_goto">üìÑ Go to file: Open the source file</li>
                    </ul>
                  </div>

                  <div class="help-section">
                    <h4 data-i18n="functions_help_graph_title">üìà Call Graph</h4>
                    <p class="muted small" data-i18n="functions_help_graph_desc">
                      The graph below the table shows function call relationships detected during Watch mode execution.
                    </p>
                  </div>

                  <div class="help-section">
                    <h4 data-i18n="functions_help_tips_title">üí° Tips</h4>
                    <ul class="muted small">
                      <li data-i18n="functions_help_tips_unused">Unused functions may be dead code ‚Äì consider removing them</li>
                      <li data-i18n="functions_help_tips_watch">Use Watch mode to track real function calls</li>
                      <li data-i18n="functions_help_tips_simulate">Simulate removal before deleting to check dependencies</li>
                    </ul>
                  </div>
                </div>
              </aside>
            </div>
          </section>

          <section class="view hidden" data-view="api" aria-label="Vue API">
            <section class="panel">
              <header>
                <div>
                  <p class="eyebrow">Int√©gration</p>
                  <h2>API du Projet</h2>
                  <p class="muted">Endpoints d√©tect√©s via le connecteur configur√©.</p>
                </div>
                <div class="badges" id="api-status-badge"></div>
              </header>
              
              <div class="api-docs-intro" style="margin-bottom: 1rem; padding: 1rem; background: var(--panel-contrast); border-radius: 8px; border: 1px solid var(--border);">
                  <h4 data-i18n="api_docs_title">Documentation & Configuration</h4>
                  <p data-i18n="api_docs_intro">Jupiter analyse automatiquement les endpoints API de votre projet (FastAPI, Flask, Django, etc.).</p>
                  <p data-i18n="api_docs_config">Pour configurer la d√©tection, assurez-vous que votre fichier <code>jupiter.yaml</code> contient la section <code>api</code> correcte.</p>
                  <pre style="background: var(--bg); padding: 0.5rem; border-radius: 4px; margin-top: 0.5rem; overflow-x: auto;">
api:
  connector: "fastapi"  # ou "flask", "django"
  app_var: "app"        # nom de la variable d'application
  path: "src/main.py"   # chemin vers le fichier principal</pre>
              </div>

              <div class="table-wrapper">
                <table aria-label="Endpoints API">
                  <thead>
                    <tr>
                      <th>M√©thode</th>
                      <th>Chemin</th>
                      <th>R√©sum√©</th>
                      <th>Tags</th>
                    </tr>
                  </thead>
                  <tbody id="api-endpoints-body"></tbody>
                </table>
                <p class="empty" id="api-empty">Aucune API configur√©e ou d√©tect√©e.</p>
              </div>
            </section>
          </section>

          <!-- Live Map view removed - now provided by livemap plugin -->

          <section class="view hidden" data-view="history" aria-label="Vue historique">
            <div class="grid two-cols">
              <section class="panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="history_eyebrow">Historique</p>
                    <h2 data-i18n="history_title">Snapshots enregistr√©s</h2>
                    <p class="muted" data-i18n="history_subtitle">Chaque scan persiste un instantan√© diffable.</p>
                  </div>
                  <div class="actions">
                    <button class="ghost small" data-action="refresh-snapshots" data-i18n="history_refresh">Rafra√Æchir</button>
                  </div>
                </header>
                <div class="table-wrapper">
                  <table aria-label="Snapshots">
                    <thead>
                      <tr>
                        <th data-i18n="history_col_label">Libell√©</th>
                        <th data-i18n="history_col_date">Date</th>
                        <th class="numeric" data-i18n="history_col_files">Fichiers</th>
                        <th class="numeric" data-i18n="history_col_size">Taille</th>
                        <th data-i18n="history_col_actions">Actions</th>
                      </tr>
                    </thead>
                    <tbody id="snapshot-table-body"></tbody>
                  </table>
                  <p class="empty hidden" id="snapshots-empty" data-i18n="history_empty">Aucun snapshot enregistr√©.</p>
                </div>
              </section>

              <section class="panel">
                <header>
                  <div>
                    <p class="eyebrow" data-i18n="history_diff_eyebrow">Comparaison</p>
                    <h2 data-i18n="history_diff_title">Comparer deux scans</h2>
                    <p class="muted" data-i18n="history_diff_subtitle">S√©lectionnez deux snapshots pour analyser les √©carts.</p>
                  </div>
                </header>
                <div class="history-controls" style="display: flex; flex-direction: column; gap: 0.75rem;">
                  <div class="selectors" style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                    <label style="flex:1; min-width: 200px;">
                      <span data-i18n="history_select_a">Snapshot A</span>
                      <select id="snapshot-select-a" style="width: 100%;"></select>
                    </label>
                    <label style="flex:1; min-width: 200px;">
                      <span data-i18n="history_select_b">Snapshot B</span>
                      <select id="snapshot-select-b" style="width: 100%;"></select>
                    </label>
                  </div>
                  <div class="actions">
                    <button id="snapshot-diff-btn" class="primary" data-i18n="history_diff_button">Comparer</button>
                  </div>
                </div>
                <div class="history-meta" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 0.75rem; margin-top: 1rem;">
                  <div class="card" id="snapshot-meta-a"></div>
                  <div class="card" id="snapshot-meta-b"></div>
                </div>
                <div class="history-diff" style="margin-top: 1rem; padding: 1rem; border: 1px solid var(--border); border-radius: var(--radius);" id="snapshot-diff-output"></div>
              </section>
            </div>

            <!-- Snapshot Detail Panel -->
            <section class="panel hidden" id="snapshot-detail-panel" style="margin-top: 1.5rem;">
              <header>
                <div>
                  <p class="eyebrow" data-i18n="snapshot_detail_eyebrow">Snapshot Detail</p>
                  <h3 id="snapshot-detail-title" data-i18n="snapshot_detail_title">Full Report</h3>
                  <p class="muted" id="snapshot-detail-subtitle"></p>
                </div>
                <div class="actions">
                  <button class="primary small" id="snapshot-export-btn" data-i18n="snapshot_export">üì• Export JSON</button>
                  <button class="ghost small" id="snapshot-detail-close">‚úï</button>
                </div>
              </header>
              <div class="stats-grid" id="snapshot-detail-stats" style="margin-bottom: 1rem;"></div>
              <div class="table-wrapper">
                <table aria-label="Snapshot Files">
                  <thead>
                    <tr>
                      <th data-i18n="files_col_path">Path</th>
                      <th class="numeric" data-i18n="files_col_size">Size</th>
                      <th data-i18n="files_col_type">Type</th>
                    </tr>
                  </thead>
                  <tbody id="snapshot-detail-files"></tbody>
                </table>
              </div>
            </section>
          </section>

          <section class="view hidden" data-view="plugins" aria-label="Vue plugins">
            <section class="panel">
              <header class="view-header">
                <div>
                  <p class="eyebrow" data-i18n="plugins_eyebrow">Extensions</p>
                  <h2 data-i18n="plugins_title">Plugins Jupiter</h2>
                  <p class="muted" data-i18n="plugins_subtitle">
                    Activez, configurez et surveillez les extensions de Jupiter.
                  </p>
                </div>
                <div class="actions">
                  <button class="ghost" data-action="open-marketplace" title="Marketplace" data-i18n="plugins_marketplace_btn">üõí Marketplace</button>
                  <button class="primary" data-action="open-install-plugin-modal" data-i18n="plugins_install_btn">‚ûï Installer</button>
                  <button class="secondary" data-action="open-uninstall-plugin-modal" data-i18n="plugins_uninstall_btn">üóëÔ∏è D√©sinstaller</button>
                  <button class="secondary" data-action="reload-plugins" data-i18n="plugins_reload_btn">üîÑ Recharger</button>
                </div>
              </header>

              <div class="panel-body">
                <div class="plugins-layout">
                  <div class="plugins-main">
                    <div class="plugins-help card">
                      <h3 data-i18n="plugins_help_title">Qu'est-ce qu'un plugin&nbsp;?</h3>
                      <p class="muted" data-i18n="plugins_help_intro">
                        Les plugins ajoutent des fonctionnalit√©s √† Jupiter (qualit√© de code, notifications, int√©grations a0API, etc.).
                      </p>
                      <ul class="muted">
                        <li data-i18n="plugins_help_point_1">Chaque plugin peut √™tre activ√© ou d√©sactiv√©.</li>
                        <li data-i18n="plugins_help_point_2">Certains plugins ajoutent des vues dans le menu de gauche.</li>
                        <li data-i18n="plugins_help_point_3">D'autres ajoutent une section dans les Param√®tres &gt; Plugins.</li>
                      </ul>
                      <p class="muted small" data-i18n="plugins_help_note">
                        Astuce a0: si quelque chose "dispara√Æt" dans l'interface, v√©rifiez ici si le plugin correspondant est activ√©.
                      </p>
                    </div>

                    <div class="plugin-list" id="plugin-list"></div>
                  </div>

                  <aside class="plugins-aside">
                    <div class="card">
                      <h3 data-i18n="plugins_status_title">R√©sum√©</h3>
                      <ul class="plugins-summary" id="plugins-summary"></ul>
                    </div>
                    <div class="card">
                      <h3 data-i18n="plugins_how_to_title">Comment utiliser les plugins&nbsp;?</h3>
                      <ol class="muted small">
                        <li data-i18n="plugins_how_to_step_1">Ouvrez cette page pour voir la liste des plugins disponibles.</li>
                        <li data-i18n="plugins_how_to_step_2">Activez les plugins qui vous int√©ressent (par exemple a0: Notifications).</li>
                        <li data-i18n="plugins_how_to_step_3">Allez dans l'onglet Param√®tres pour ajuster leur configuration si besoin.</li>
                      </ol>
                    </div>
                  </aside>
                </div>
              </div>
            </section>
          </section>

          <section class="view hidden" data-view="settings" aria-label="Vue param√®tres">
            <div class="settings-layout">
                <div class="settings-two-columns">
                  <!-- Left column: Main settings -->
                  <div class="settings-main-column">
                    <form id="settings-form" class="settings-form-grid">
                    <!-- Network Section -->
                    <section class="panel settings-section">
                        <header>
                            <h3 data-i18n="settings_network_title">R√©seau</h3>
                        </header>
                        <div class="form-group">
                            <label for="conf-server-host">Server Host</label>
                            <input type="text" id="conf-server-host" name="server_host" />
                        </div>
                        <div class="form-group">
                            <label for="conf-server-port">Server Port</label>
                            <input type="number" id="conf-server-port" name="server_port" />
                        </div>
                        <div class="form-group">
                            <label for="conf-gui-host">GUI Host</label>
                            <input type="text" id="conf-gui-host" name="gui_host" />
                        </div>
                        <div class="form-group">
                            <label for="conf-gui-port">GUI Port</label>
                            <input type="number" id="conf-gui-port" name="gui_port" />
                        </div>
                        <div class="form-actions" style="margin-top: 1rem; border-top: 1px solid var(--border); padding-top: 1rem;">
                            <button type="button" class="primary small" data-action="save-network-settings" data-i18n="save">üíæ Enregistrer</button>
                            <span class="setting-result" id="network-settings-status"></span>
                        </div>
                    </section>

                    <!-- UI Section -->
                    <section class="panel settings-section">
                        <header>
                            <h3 data-i18n="settings_ui_title">Interface</h3>
                        </header>
                        <div class="form-group">
                            <label for="conf-ui-theme">Theme</label>
                            <select id="conf-ui-theme" name="ui_theme">
                                <option value="dark">Dark</option>
                                <option value="light">Light</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="conf-ui-lang">Language</label>
                            <select id="conf-ui-lang" name="ui_language">
                                <!-- Options populated dynamically from lang/*.json files -->
                            </select>
                            <p class="muted small" id="lang-version-info"></p>
                        </div>
                        <div class="form-actions" style="margin-top: 1rem; border-top: 1px solid var(--border); padding-top: 1rem;">
                            <button type="button" class="primary small" data-action="save-ui-settings" data-i18n="save">üíæ Enregistrer</button>
                            <span class="setting-result" id="ui-settings-status"></span>
                        </div>
                    </section>

                    <!-- Security Section -->
                    <section class="panel settings-section">
                        <header>
                            <h3 data-i18n="settings_security_title">üîí S√©curit√©</h3>
                        </header>
                        <div class="form-group checkbox-group" title="Autoriser l'ex√©cution de commandes shell via l'interface">
                            <label for="conf-sec-allow-run" data-i18n="settings_allow_run">Allow Run Command</label>
                            <input type="checkbox" id="conf-sec-allow-run" name="sec_allow_run" />
                            <p class="muted small" data-i18n="settings_allow_run_hint">Autoriser l'ex√©cution de commandes shell via l'interface.</p>
                        </div>
                        <div class="form-group" title="Niveau de log global">
                            <label for="conf-log-level" data-i18n="settings_log_level_label">Log Level</label>
                            <select id="conf-log-level" name="log_level">
                                <option value="DEBUG">DEBUG</option>
                                <option value="INFO" selected>INFO</option>
                                <option value="WARNING">WARNING</option>
                                <option value="ERROR">ERROR</option>
                                <option value="CRITICAL">CRITICAL</option>
                            </select>
                            <p class="muted small" data-i18n="settings_log_level_hint">Niveau de verbosit√© des logs (DEBUG = plus d√©taill√©).</p>
                        </div>
                        <div class="form-group" title="Chemin du fichier de log">
                            <label for="conf-log-path" data-i18n="settings_log_path_label">Log File Path</label>
                            <input type="text" id="conf-log-path" name="log_path" placeholder="logs/jupiter.log" />
                            <p class="muted small" data-i18n="settings_log_path_hint">Destination file for logs (leave empty to disable file output).</p>
                        </div>
                        <div class="form-group checkbox-group" title="R√©initialiser le fichier log √† chaque d√©marrage">
                            <label for="conf-log-reset" data-i18n="settings_log_reset_label">Reset log on startup</label>
                            <input type="checkbox" id="conf-log-reset" name="log_reset_on_start" checked />
                            <p class="muted small" data-i18n="settings_log_reset_hint">If checked, log file is cleared on each startup. Otherwise, a separator is added.</p>
                        </div>
                        <div class="form-actions" style="margin-top: 1rem; border-top: 1px solid var(--border); padding-top: 1rem;">
                            <button type="button" class="primary small" data-action="save-security-settings" data-i18n="save">üíæ Enregistrer</button>
                            <span class="setting-result" id="security-settings-status"></span>
                        </div>
                    </section>

                    <!-- User Management Section -->
                    <section class="panel settings-section settings-section-wide">
                        <header>
                            <h3 data-i18n="settings_users_title">üë• Utilisateurs</h3>
                        </header>
                        <div class="table-wrapper">
                            <table aria-label="Utilisateurs" class="users-table">
                                <thead>
                                    <tr>
                                        <th data-i18n="settings_users_name">Nom</th>
                                        <th data-i18n="settings_users_token">Token</th>
                                        <th data-i18n="settings_users_role">R√¥le</th>
                                        <th data-i18n="settings_users_actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="users-table-body"></tbody>
                            </table>
                        </div>
                        <div class="form-group" style="margin-top: 1rem; border-top: 1px solid var(--border); padding-top: 1rem;">
                            <h4 class="small muted" data-i18n="settings_users_add">‚ûï Ajouter un utilisateur</h4>
                            <div class="user-form-row" style="display: grid; grid-template-columns: 1fr 1fr 100px auto; gap: 0.5rem; align-items: center; margin-top: 0.5rem;">
                                <input type="text" id="new-user-name" placeholder="Nom d'utilisateur" />
                                <input type="text" id="new-user-token" placeholder="Token d'acc√®s" />
                                <select id="new-user-role">
                                    <option value="viewer">Viewer</option>
                                    <option value="editor">Editor</option>
                                    <option value="admin">Admin</option>
                                </select>
                                <button type="button" class="primary small" data-action="add-user" title="Ajouter">‚ûï</button>
                            </div>
                        </div>
                    </section>
                    </form>

                    <!-- Dynamic Plugin Settings - populated by plugins with settings UI -->
                    <div id="plugin-settings-container" class="plugin-settings-container"></div>
                  </div>
                  
                  <!-- Right column: Meeting License (separate, full height) -->
                  <div class="settings-meeting-column">
                    <!-- Meeting License Section -->
                    <section class="panel settings-section meeting-license-panel">
                        <header>
                            <h3 data-i18n="settings_meeting_title">üîê Licence Meeting</h3>
                        </header>
                        <div class="form-group">
                            <label for="conf-meeting-key" data-i18n="meeting_device_key_label">Device Key</label>
                            <input type="text" id="conf-meeting-key" name="meeting_device_key" placeholder="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" />
                            <p class="muted small" data-i18n="meeting_device_key_hint">Cl√© unique d'identification aupr√®s du service Meeting.</p>
                        </div>
                        <div class="form-group">
                            <label for="conf-meeting-token" data-i18n="meeting_auth_token_label">Auth Token</label>
                            <input type="text" id="conf-meeting-token" name="meeting_auth_token" placeholder="Token d'authentification" />
                            <p class="muted small" data-i18n="meeting_auth_token_hint">Token d'authentification requis par l'API Meeting.</p>
                        </div>
                        <div class="form-group">
                            <label for="conf-meeting-heartbeat" data-i18n="meeting_heartbeat_label">Heartbeat Interval (sec)</label>
                            <input type="number" id="conf-meeting-heartbeat" name="meeting_heartbeat_interval" min="10" max="600" value="60" />
                            <p class="muted small" data-i18n="meeting_heartbeat_hint">Fr√©quence d'envoi des signaux de pr√©sence √† Meeting.</p>
                        </div>
                        <div class="form-group" style="margin-top: 1rem;">
                            <button type="button" class="primary" data-action="save-meeting-settings" data-i18n="meeting_save_btn">üíæ Enregistrer</button>
                            <button type="button" class="secondary" data-action="check-meeting-license" data-i18n="meeting_check_btn" style="margin-left: 0.5rem;">üîÑ V√©rifier</button>
                        </div>
                        
                        <!-- License Details Section -->
                        <div class="license-details-box" style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-subtle); border-radius: var(--radius); border: 1px solid var(--border);">
                            <h4 class="small" style="margin-bottom: 0.75rem;" data-i18n="license_details_title">üìã License Details</h4>
                            <div class="license-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem;">
                                <div>
                                    <p class="small muted" data-i18n="license_status">Status</p>
                                    <p class="small" id="license-detail-status">‚Äî</p>
                                </div>
                                <div>
                                    <p class="small muted" data-i18n="license_authorized">Authorized</p>
                                    <p class="small" id="license-detail-authorized">‚Äî</p>
                                </div>
                                <div>
                                    <p class="small muted" data-i18n="license_device_type">Device Type</p>
                                    <p class="small" id="license-detail-device-type">‚Äî</p>
                                </div>
                                <div>
                                    <p class="small muted" data-i18n="license_token_count">Token Count</p>
                                    <p class="small" id="license-detail-token-count">‚Äî</p>
                                </div>
                                <div>
                                    <p class="small muted" data-i18n="license_checked_at">Last Checked</p>
                                    <p class="small" id="license-detail-checked-at">‚Äî</p>
                                </div>
                                <div>
                                    <p class="small muted" data-i18n="license_http_status">HTTP Status</p>
                                    <p class="small" id="license-detail-http-status">‚Äî</p>
                                </div>
                                <div style="grid-column: 1 / -1;">
                                    <p class="small muted" data-i18n="license_meeting_url">Meeting URL</p>
                                    <p class="small mono" id="license-detail-meeting-url">‚Äî</p>
                                </div>
                                <div style="grid-column: 1 / -1;">
                                    <p class="small muted" data-i18n="license_message">Message</p>
                                    <p class="small" id="license-detail-message">‚Äî</p>
                                </div>
                            </div>
                        </div>
                    </section>
                  </div>
                </div>
            </div>
          </section>

          <!-- Dynamic plugin view container - populated by plugins with sidebar UI -->
          <div id="plugin-views-container"></div>

          <section class="view hidden" data-view="suggestions" aria-label="Vue Suggestions IA">
            <header class="view-header">
              <div>
                <h2 data-i18n="suggestions_title">Suggestions IA</h2>
                <p class="muted" data-i18n="suggestions_subtitle">Propositions d'am√©lioration et de refactoring.</p>
              </div>
              <div class="actions">
                 <button class="secondary" data-action="refresh-suggestions" data-i18n="refresh">Actualiser</button>
                 <button class="secondary" data-action="export-suggestions" data-i18n="export_report">Exporter Rapport</button>
              </div>
            </header>
            <div class="panel">
               <div id="suggestions-list" class="list-group">
                  <p class="muted">Aucune suggestion pour le moment. Lancez une analyse.</p>
               </div>
            </div>
          </section>

          <section class="view hidden" data-view="projects" aria-label="Vue Projets">
            <!-- Active Project Section (with API Config) -->
            <section class="panel" style="margin-bottom: 1.5rem;">
              <header>
                <div>
                  <p class="eyebrow" data-i18n="active_project_section">üéØ Projet Actif</p>
                  <h2 id="project-current-name">‚Äî</h2>
                  <p class="muted mono small" id="project-current-path">‚Äî</p>
                </div>
                <div class="actions" style="display: flex; gap: 0.5rem; align-items: center;">
                  <div id="project-runtime-status" style="display: flex; align-items: center; gap: 0.5rem;">
                    <span class="status-indicator stopped"></span>
                    <span class="status-text small muted" data-i18n="project_runtime_stopped">Arr√™t√©</span>
                  </div>
                  <span id="project-current-status" class="pill pill-muted">‚Äî</span>
                </div>
              </header>
              
              <!-- Health Metrics Grid -->
              <div class="metrics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-top: 1rem;">
                <div class="metric-card">
                  <p class="label" data-i18n="project_metric_active">Projet actif</p>
                  <p class="value" id="project-health-active">‚Äî</p>
                </div>
                <div class="metric-card">
                  <p class="label" data-i18n="project_metric_last_scan">Dernier scan</p>
                  <p class="value" id="project-health-scan">‚Äî</p>
                </div>
                <div class="metric-card">
                  <p class="label" data-i18n="project_metric_paths">Racine active</p>
                  <p class="value mono small" id="project-health-paths">‚Äî</p>
                </div>
                <div class="metric-card">
                  <p class="label" data-i18n="project_metric_status">API</p>
                  <p class="value mono small" id="project-health-status">‚Äî</p>
                </div>
              </div>

              <!-- Quick Actions -->
              <div class="quick-actions" style="margin-top: 1.5rem; display: flex; flex-wrap: wrap; gap: 0.5rem;">
                <button class="secondary small" data-action="open-scan-modal" data-i18n="project_action_scan">Scanner le projet</button>
                <button class="secondary small" data-action="open-run-modal" data-i18n="project_action_run">Ex√©cuter une commande</button>
                <button class="ghost small" data-action="refresh-projects" data-i18n="project_action_refresh">Actualiser</button>
              </div>

              <!-- Project API Configuration (inside active project section) -->
              <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border);">
                <h4 class="small" style="margin-bottom: 0.75rem;" data-i18n="project_api_title">Configuration API du Projet</h4>
                <p class="muted small" style="margin-bottom: 1rem;" data-i18n="project_api_hint">Configurez le connecteur pour ce projet uniquement.</p>
                <div class="form-row" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem;">
                  <div class="form-group">
                    <label for="project-api-connector">Connector</label>
                    <select id="project-api-connector">
                      <option value="">(Aucun)</option>
                      <option value="local">Local (Jupiter)</option>
                      <option value="fastapi">FastAPI</option>
                      <option value="flask">Flask</option>
                      <option value="django">Django</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="project-api-app-var">App Variable</label>
                    <input type="text" id="project-api-app-var" placeholder="app" />
                  </div>
                  <div class="form-group">
                    <label for="project-api-path">Main File Path</label>
                    <input type="text" id="project-api-path" placeholder="src/main.py" />
                  </div>
                </div>
                <div class="form-actions" style="margin-top: 0.75rem;">
                  <button class="primary small" data-action="save-project-api" data-i18n="project_api_save">Enregistrer</button>
                </div>
              </div>

              <!-- Performance Section (Project-specific) -->
              <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border);">
                <h4 class="small" style="margin-bottom: 0.75rem;" data-i18n="settings_perf_title">‚ö° Performance</h4>
                <p class="muted small" style="margin-bottom: 1rem;" data-i18n="project_perf_hint">Param√®tres de performance pour ce projet.</p>
                <div class="form-row" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem;">
                  <div class="form-group checkbox-group">
                    <label for="conf-perf-parallel" data-i18n="perf_parallel_scan">Parallel Scan</label>
                    <input type="checkbox" id="conf-perf-parallel" name="perf_parallel_scan" />
                  </div>
                  <div class="form-group">
                    <label for="conf-perf-workers" data-i18n="perf_max_workers">Max Workers (0 = Auto)</label>
                    <input type="number" id="conf-perf-workers" name="perf_max_workers" min="0" />
                  </div>
                  <div class="form-group">
                    <label for="conf-perf-timeout" data-i18n="perf_scan_timeout">Scan Timeout (sec)</label>
                    <input type="number" id="conf-perf-timeout" name="perf_scan_timeout" min="10" />
                  </div>
                  <div class="form-group checkbox-group">
                    <label for="conf-perf-graph-simple" data-i18n="perf_graph_simplification">Graph Simplification</label>
                    <input type="checkbox" id="conf-perf-graph-simple" name="perf_graph_simplification" />
                  </div>
                  <div class="form-group">
                    <label for="conf-perf-graph-nodes" data-i18n="perf_max_graph_nodes">Max Graph Nodes</label>
                    <input type="number" id="conf-perf-graph-nodes" name="perf_max_graph_nodes" min="10" />
                  </div>
                </div>
                <div class="form-actions" style="margin-top: 0.75rem;">
                  <button class="primary small" data-action="save-project-perf" data-i18n="save">üíæ Enregistrer</button>
                  <span class="setting-result" id="project-perf-status"></span>
                </div>
              </div>
            </section>

            <!-- Ignore/Exclusion Section -->
            <section class="panel" id="project-ignore-panel" style="margin-bottom: 1.5rem;">
              <header>
                <div>
                  <p class="eyebrow" data-i18n="project_ignore_eyebrow">Exclusions</p>
                  <h3 data-i18n="project_ignore_title">Fichiers & dossiers √† exclure</h3>
                  <p class="muted small" data-i18n="project_ignore_hint">Les √©l√©ments coch√©s seront ignor√©s lors des scans.</p>
                </div>
                <div class="actions" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                  <button class="ghost small" data-action="ignore-select-all" data-i18n="project_ignore_select_all">Tout</button>
                  <button class="ghost small" data-action="ignore-select-none" data-i18n="project_ignore_select_none">Aucun</button>
                  <button class="ghost small" data-action="refresh-root-entries" data-i18n="project_ignore_refresh">‚Üª</button>
                </div>
              </header>
              
              <!-- Controls -->
              <div class="ignore-controls" style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: center; margin-top: 1rem;">
                <div class="form-group" style="flex: 1; min-width: 200px; margin: 0;">
                  <input type="text" id="ignore-filter-input" placeholder="Filtrer..." style="width: 100%;" />
                </div>
                <label class="checkbox-inline" style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem;">
                  <input type="checkbox" id="ignore-toggle-hidden" />
                  <span data-i18n="project_ignore_show_hidden">Afficher fichiers cach√©s</span>
                </label>
              </div>
              
              <!-- Entries Grid -->
              <div id="ignore-entries-grid" class="ignore-entries-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 0.5rem; margin-top: 1rem; max-height: 300px; overflow-y: auto; padding: 0.5rem; background: var(--bg-subtle); border-radius: var(--radius);">
                <p class="muted small" data-i18n="project_ignore_loading">Chargement...</p>
              </div>
              
              <!-- Custom Patterns -->
              <div class="form-group" style="margin-top: 1rem;">
                <label for="ignore-custom-input" data-i18n="project_ignore_custom_label">Patterns personnalis√©s (glob, s√©par√©s par virgule)</label>
                <input type="text" id="ignore-custom-input" placeholder="ex: *.log, temp/*, __pycache__/**" style="width: 100%;" />
              </div>
              
              <!-- Save Button -->
              <div class="form-actions" style="margin-top: 1rem;">
                <button class="primary small" data-action="save-ignore-config" data-i18n="project_ignore_save">Enregistrer les exclusions</button>
              </div>
            </section>

            <!-- Projects List Section -->
            <section class="panel">
              <header>
                <div>
                  <p class="eyebrow" data-i18n="project_list_eyebrow">Liste</p>
                  <h3 data-i18n="project_list_title">Tous vos projets</h3>
                  <p class="muted" data-i18n="project_list_subtitle">Activez, actualisez ou supprimez une entr√©e.</p>
                </div>
                <div class="actions">
                  <span class="badge" id="project-count-badge">0</span>
                  <button class="primary small" data-action="open-project-wizard" data-i18n="add_project">Ajouter un projet</button>
                </div>
              </header>
              
              <!-- Projects Grid/List -->
              <div id="projects-list" class="projects-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1rem; margin-top: 1rem;"></div>
              
              <!-- Empty State -->
              <div id="projects-empty" class="empty-state" style="display: none; text-align: center; padding: 3rem;">
                <p class="muted" data-i18n="projects_empty">Aucun projet configur√©.</p>
                <button class="primary" data-action="open-project-wizard" data-i18n="add_project" style="margin-top: 1rem;">Ajouter un projet</button>
              </div>
            </section>

            <!-- Usage Notes -->
            <section class="panel" style="margin-top: 1.5rem;">
              <header>
                <div>
                  <p class="eyebrow" data-i18n="project_notes_eyebrow">Notes</p>
                  <h4 data-i18n="project_notes_title">Conseils d'utilisation</h4>
                </div>
              </header>
              <ul class="notes-list" style="margin-top: 0.5rem; padding-left: 1.5rem;">
                <li class="small muted" data-i18n="project_note_switch">Basculez entre projets sans red√©marrer Jupiter.</li>
                <li class="small muted" data-i18n="project_note_scan">Chaque projet conserve son cache, snapshots et licence Meeting.</li>
                <li class="small muted" data-i18n="project_note_security">Supprimer retire uniquement l'entr√©e config, jamais vos fichiers.</li>
                <li class="small muted" data-i18n="project_note_refresh">Cliquez Actualiser apr√®s avoir modifi√© manuellement le fichier .jupiter.yaml.</li>
              </ul>
            </section>
          </section>
        </main>
      </div>
    </div>
    <!-- Jupiter Bridge Frontend Modules -->
    <script src="js/i18n_loader.js?v=0.2.0"></script>
    <script src="js/jupiter_bridge.js?v=0.1.0"></script>
    <script src="js/plugin_container.js?v=0.1.0"></script>
    <script src="js/auto_form.js?v=0.2.0"></script>
    <script src="js/logs_panel.js?v=0.2.0"></script>
    <script src="js/plugin_settings_frame.js?v=0.2.0"></script>
    <script src="js/metrics_widget.js?v=0.1.0"></script>
    <script src="js/plugin_integration.js?v=0.1.0"></script>
    <script src="js/help_panel.js?v=0.1.0"></script>
    <script src="js/data_export.js?v=0.1.0"></script>
    <script src="js/ux_utils.js?v=0.1.0"></script>
    <!-- Main Application -->
    <script type="module" src="app.js?v=1.0.2"></script>
    <div style="position: fixed; bottom: 5px; right: 5px; font-size: 10px; color: var(--text-muted); opacity: 0.5;">v1.0.2</div>

    <!-- Modals -->
    <div id="scan-modal" class="modal-overlay hidden">
      <div class="modal">
        <header>
          <h3 data-i18n="scan_modal_title">Lancer un scan</h3>
          <button class="ghost small" data-action="close-scan-modal">‚úï</button>
        </header>
        <div class="modal-body scan-modal-body">
          <div class="scan-options-grid">
            <label class="scan-toggle" for="scan-show-hidden">
              <span data-i18n="scan_opt_hidden">Inclure fichiers cach√©s</span>
              <input type="checkbox" id="scan-show-hidden" />
            </label>
            <label class="scan-toggle" for="scan-incremental">
              <span data-i18n="scan_opt_inc">Scan incr√©mental</span>
              <input type="checkbox" id="scan-incremental" />
            </label>
            <label class="scan-toggle" for="scan-no-cache">
              <span data-i18n="scan_opt_no_cache">Ignorer le cache</span>
              <input type="checkbox" id="scan-no-cache" />
            </label>
            <label class="scan-toggle" for="scan-no-snapshot">
              <span data-i18n="scan_opt_no_snapshot">Ne pas cr√©er de snapshot</span>
              <input type="checkbox" id="scan-no-snapshot" />
            </label>
          </div>
          <div class="form-group scan-ignore-field">
            <label for="scan-ignore" data-i18n="scan_opt_ignore">Ignorer (glob patterns, s√©par√©s par virgule)</label>
            <input type="text" id="scan-ignore" placeholder="*.log, temp/*" />
          </div>
          <div class="form-group">
            <label for="scan-snapshot-label" data-i18n="scan_opt_snapshot_label">Label du snapshot (optionnel)</label>
            <input type="text" id="scan-snapshot-label" placeholder="e.g. v1.0, before-refactor" />
          </div>
        </div>
        <footer>
          <button class="secondary" data-action="close-scan-modal" data-i18n="cancel">Annuler</button>
          <button class="primary" data-action="confirm-scan" data-i18n="scan_confirm">Scanner</button>
        </footer>
      </div>
    </div>

    <div id="run-modal" class="modal-overlay hidden">
        <div class="modal">
            <header>
                <h3 data-i18n="run_modal_title">Ex√©cuter une commande</h3>
                <button class="ghost small" data-action="close-run-modal">‚úï</button>
            </header>
            <div class="modal-body">
                <div class="form-group">
                    <label for="run-command" data-i18n="run_cmd_label">Commande</label>
                    <input type="text" id="run-command" placeholder="pytest tests/" />
                </div>
                <div class="form-group checkbox-group">
                    <label for="run-dynamic" data-i18n="run_opt_dynamic">Activer l'analyse dynamique (trace)</label>
                    <input type="checkbox" id="run-dynamic" />
                </div>
                <pre id="run-output" class="code-block hidden" style="max-height: 200px; overflow: auto; margin-top: 1rem;"></pre>
            </div>
            <footer>
                <button class="secondary" data-action="close-run-modal" data-i18n="cancel">Fermer</button>
                <button class="primary" data-action="confirm-run" data-i18n="run_confirm">Ex√©cuter</button>
            </footer>
        </div>
    </div>

    <div id="raw-config-modal" class="modal-overlay hidden">
        <div class="modal" style="width: 800px; max-width: 90vw;">
            <header>
                <h3 data-i18n="raw_config_title">√âditeur YAML (jupiter.yaml)</h3>
                <button class="ghost small" data-action="close-raw-config">‚úï</button>
            </header>
            <div class="modal-body">
                <p class="muted small" style="margin-bottom: 1rem;">Attention : Une syntaxe invalide peut emp√™cher le serveur de red√©marrer.</p>
                <textarea id="raw-config-editor" style="width: 100%; height: 400px; font-family: monospace; background: var(--bg-subtle); color: var(--text); border: 1px solid var(--border); padding: 0.5rem;"></textarea>
            </div>
            <footer>
                <button class="secondary" data-action="close-raw-config" data-i18n="cancel">Annuler</button>
                <button class="primary" data-action="save-raw-config" data-i18n="save">Enregistrer</button>
            </footer>
        </div>
    </div>



    <div id="simulation-modal" class="modal-overlay hidden">
        <div class="modal">
            <header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h2>Simulation d'impact</h2>
                <button class="close-btn" onclick="document.getElementById('simulation-modal').classList.add('hidden')">√ó</button>
            </header>
            <div id="simulation-content"></div>
            <div class="actions" style="margin-top: 1rem;">
                <button class="primary" onclick="document.getElementById('simulation-modal').classList.add('hidden')">Fermer</button>
            </div>
        </div>
    </div>

    <!-- Browser Modal -->
    <dialog id="browser-modal" class="modal">
      <div class="modal-content">
        <header>
          <h3 data-i18n="browser_title">S√©lectionner un dossier</h3>
          <button class="close-btn" data-action="close-modal" title="Fermer">√ó</button>
        </header>
        <div class="browser-body">
          <div class="browser-path">
            <input type="text" id="browser-current-path" readonly />
          </div>
          <ul class="browser-list" id="browser-list"></ul>
        </div>
        <footer>
          <button class="ghost" data-action="close-modal" data-i18n="cancel">Annuler</button>
          <button class="primary" data-action="confirm-path" data-i18n="select">S√©lectionner</button>
        </footer>
      </div>
    </dialog>
    <!-- Login Modal -->
    <dialog id="login-modal" class="modal" style="min-width: 350px;">
      <div class="modal-content">
        <header>
          <h2 data-i18n="login_title">Connexion</h2>
        </header>
        <div class="modal-body">
          <form id="login-form" onsubmit="event.preventDefault(); handleLogin();">
            <div class="form-group">
              <label for="login-username">Nom d'utilisateur</label>
              <input type="text" id="login-username" placeholder="admin" required />
            </div>
            <div class="form-group">
              <label for="login-password">Mot de passe (Token)</label>
              <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
            </div>
            <div class="form-group checkbox-group">
              <label for="login-remember">Se souvenir de moi</label>
              <input type="checkbox" id="login-remember" />
            </div>
            <div id="login-error" class="error hidden" style="margin-top: 1rem; color: var(--text-error);"></div>
            <div style="margin-top: 1.5rem; display: flex; justify-content: flex-end;">
              <button type="submit" class="primary" data-i18n="login_button" style="width: 100%;">Connexion</button>
            </div>
          </form>
        </div>
      </div>
    </dialog>

    <!-- Project Wizard Modal -->
    <dialog id="project-wizard-modal" class="modal" style="min-width: 400px;">
      <div class="modal-content">
        <header>
          <h2>Bienvenue sur Jupiter</h2>
        </header>
        <div class="modal-body">
          <p style="margin-bottom: 1rem;">Aucun projet n'est configur√©. Commen√ßons par en cr√©er un.</p>
          <form id="project-wizard-form" onsubmit="event.preventDefault(); handleCreateProject();">
            <div class="form-group">
              <label for="project-path">Chemin du projet (absolu)</label>
              <div style="display: flex; gap: 0.5rem;">
                <input type="text" id="project-path" placeholder="C:\Dev\MonProjet" required style="flex: 1;" />
                <button type="button" class="ghost" onclick="openBrowserForWizard()" title="Parcourir">üìÇ</button>
              </div>
              <p class="small muted">Le dossier doit exister.</p>
            </div>
            <div class="form-group">
              <label for="project-name">Nom du projet</label>
              <input type="text" id="project-name" placeholder="Mon Projet" required />
            </div>
            <div id="project-wizard-error" class="error hidden" style="margin-top: 1rem; color: var(--text-error);"></div>
            <div style="margin-top: 1.5rem; display: flex; justify-content: flex-end;">
              <button type="submit" class="primary" style="width: 100%;">Cr√©er le projet</button>
            </div>
          </form>
        </div>
      </div>
    </dialog>

    <!-- Install Plugin Modal -->
    <dialog id="install-plugin-modal" class="modal" style="min-width: 450px;">
      <div class="modal-content">
        <header>
          <h3 data-i18n="plugins_install_title">Installer un plugin</h3>
          <button class="ghost small" data-action="close-install-plugin-modal">‚úï</button>
        </header>
        <div class="modal-body">
          <p class="muted small" style="margin-bottom: 1rem;" data-i18n="plugins_install_intro">
            Installez un plugin depuis une URL ou un fichier local.
          </p>
          
          <div class="form-group">
            <label data-i18n="plugins_install_method">M√©thode d'installation</label>
            <div class="install-method-tabs" style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
              <button type="button" class="secondary small install-tab active" data-tab="url" data-i18n="plugins_install_tab_url">üìé URL</button>
              <button type="button" class="secondary small install-tab" data-tab="file" data-i18n="plugins_install_tab_file">üìÅ Fichier</button>
            </div>
          </div>

          <div id="install-url-section" class="form-group">
            <label for="install-plugin-url" data-i18n="plugins_install_url_label">URL du plugin</label>
            <input type="text" id="install-plugin-url" placeholder="https://example.com/plugin.zip" />
            <p class="small muted" data-i18n="plugins_install_url_hint">URL directe vers un fichier ZIP ou un d√©p√¥t Git.</p>
          </div>

          <div id="install-file-section" class="form-group hidden">
            <label for="install-plugin-file" data-i18n="plugins_install_file_label">Fichier du plugin</label>
            <div style="display: flex; gap: 0.5rem; align-items: center;">
              <input type="file" id="install-plugin-file" accept=".zip,.py" style="flex: 1;" />
            </div>
            <p class="small muted" data-i18n="plugins_install_file_hint">S√©lectionnez un fichier ZIP ou .py.</p>
          </div>

          <div id="install-plugin-error" class="error hidden" style="margin-top: 1rem; color: var(--text-error);"></div>
          <div id="install-plugin-success" class="success hidden" style="margin-top: 1rem; color: var(--text-success);"></div>
        </div>
        <footer>
          <button class="secondary" data-action="close-install-plugin-modal" data-i18n="cancel">Annuler</button>
          <button class="primary" data-action="confirm-install-plugin" data-i18n="plugins_install_confirm">Installer</button>
        </footer>
      </div>
    </dialog>

    <!-- Uninstall Plugin Modal -->
    <dialog id="uninstall-plugin-modal" class="modal" style="min-width: 400px;">
      <div class="modal-content">
        <header>
          <h3 data-i18n="plugins_uninstall_title">D√©sinstaller un plugin</h3>
          <button class="ghost small" data-action="close-uninstall-plugin-modal">‚úï</button>
        </header>
        <div class="modal-body">
          <p class="muted small" style="margin-bottom: 1rem;" data-i18n="plugins_uninstall_intro">
            S√©lectionnez le plugin √† supprimer de votre installation Jupiter.
          </p>
          
          <div class="form-group">
            <label for="uninstall-plugin-select" data-i18n="plugins_uninstall_select_label">Plugin √† d√©sinstaller</label>
            <select id="uninstall-plugin-select" style="width: 100%; padding: 0.5rem; background: var(--bg-subtle); border: 1px solid var(--border); border-radius: 8px; color: var(--text-main);">
              <option value="" data-i18n="plugins_uninstall_select_placeholder">-- S√©lectionnez un plugin --</option>
            </select>
          </div>

          <div id="uninstall-confirm-section" class="hidden" style="margin-top: 1rem; padding: 1rem; background: rgba(255, 100, 100, 0.1); border-radius: 8px; border: 1px solid rgba(255, 100, 100, 0.3);">
            <p style="color: var(--text-error); font-weight: 600;" data-i18n="plugins_uninstall_confirm_title">‚ö†Ô∏è √ätes-vous vraiment s√ªr ?</p>
            <p class="muted small" style="margin-top: 0.5rem;" data-i18n="plugins_uninstall_confirm_msg">
              Cette action supprimera d√©finitivement le plugin et ses fichiers. Cette op√©ration est irr√©versible.
            </p>
          </div>

          <div id="uninstall-plugin-error" class="error hidden" style="margin-top: 1rem; color: var(--text-error);"></div>
          <div id="uninstall-plugin-success" class="success hidden" style="margin-top: 1rem; color: var(--text-success);"></div>
        </div>
        <footer>
          <button class="secondary" data-action="close-uninstall-plugin-modal" data-i18n="cancel">Annuler</button>
          <button class="danger" data-action="confirm-uninstall-plugin" data-i18n="plugins_uninstall_confirm" disabled>D√©sinstaller</button>
        </footer>
      </div>
    </dialog>

    <!-- Export Unused Functions for AI Modal -->
    <dialog id="unused-functions-export-modal" class="modal" style="min-width: 700px; max-width: 900px;">
      <div class="modal-content">
        <header>
          <h3 data-i18n="functions_export_modal_title">ü§ñ Export Unused Functions for AI</h3>
          <button class="ghost small" data-action="close-unused-export-modal">‚úï</button>
        </header>
        <div class="modal-body">
          <p class="muted" data-i18n="functions_export_instructions">
            Copy this formatted report and paste it into your AI coding assistant (ChatGPT, Claude, Copilot, GitHub Copilot Chat, etc.).
            The AI agent will analyze each function to determine if it's truly orphan or used via reflection/dynamic imports.
          </p>
          <div class="export-stats" style="display: flex; gap: 1rem; margin: 1rem 0;">
            <span class="badge badge-warning" id="export-unused-count">0 unused functions</span>
            <span class="badge" id="export-files-count">0 files</span>
          </div>
          <textarea id="unused-functions-export-content" class="export-textarea" readonly rows="18" style="width: 100%; font-family: 'Fira Code', monospace; font-size: 0.85rem; background: var(--bg-subtle); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; resize: vertical;"></textarea>
        </div>
        <footer style="display: flex; gap: 0.5rem; justify-content: flex-end;">
          <button class="btn btn-primary" id="unused-functions-copy-btn" onclick="copyUnusedFunctionsExport()">üìã <span data-i18n="functions_export_copy">Copy to Clipboard</span></button>
          <button class="btn btn-secondary" data-action="close-unused-export-modal" data-i18n="close">Close</button>
        </footer>
      </div>
    </dialog>
  </body>
</html>
